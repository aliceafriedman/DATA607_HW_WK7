---
title: "Loading Tables from HTML, JSON, and AJAX"
author: "Alice Friedman"
date: "October 9, 2018"
output:
  prettydoc::html_pretty:
    theme: hpstr
    highlight: vignette
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##Setup
```{r, results="hide", message=FALSE, warning=FALSE}
library(knitr)
library(kableExtra)
library(prettydoc)
library(rvest)
library(dplyr)
library(jsonlite)
library(RCurl)
library(XML)
remove(list=ls())
```

##HTML
First, store the raw HTML file as an R object using the ```read_html``` function.
```{r}
books.html <- read_html("https://raw.githubusercontent.com/aliceafriedman/DATA607_HW_WK7/master/books.html")
```

Then, parse the R object, ```html```, using the ```html_nodes``` function from the ```rvest``` library.
```{r}
books.html.table <- html_nodes(books.html, "table")
books.html.table <- html_table(books.html.table[1], fill = TRUE) %>% as.data.frame() %>% glimpse()
books.html.table %>% 
  kable() %>% kable_styling(bootstrap_options = "responsive")
```

##JSON
First, read, the JSON obects into R using the ```jsonlite``` pakage. By setting the ```simplifyVector``` option to ```TRUE```, this will automatically create a data frame.

Unlike reading from HTML, this will also create a row number.
```{r}
books.json <- read_json("https://raw.githubusercontent.com/aliceafriedman/DATA607_HW_WK7/master/books.json",  simplifyVector = TRUE)

books.json %>% glimpse()
books.json %>%  kable() %>% kable_styling(bootstrap_options = "responsive")
```


##XML

Use ```RCurl``` function ```getURL``` to download the XML file from the web, then use the ```xmlParse``` function to read the XML file.

```{r}
books.xml <- getURL("https://raw.githubusercontent.com/aliceafriedman/DATA607_HW_WK7/master/books2.xml")
books.xml <- xmlParse(books.xml)
```
